<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock paper scissors</title>
</head>
<body>
    <script>
        choices = ['rock', 'paper', 'scissors'];

        function getComputerChoice() {
            return choices[Math.floor(Math.random()*choices.length)]
        }
        
        function getHumanChoice() {
            let answer = prompt('Enter your choice!');
            answer = answer.toLowerCase();
            if(choices.includes(answer)){
                return answer;
            }    
            else{
            }
        }
        
        function playRound(getComputerChoice, getComputerChoice){
            let computerSelection = getComputerChoice();
            let playerSelection = getHumanChoice();

            console.log(`PC: ${computerSelection}, You: ${playerSelection}`);        
            if(playerSelection.toLowerCase() === computerSelection){
                console.log('Tie!');
                return playRound(playerSelection, getComputerChoice);
            }
            else if((playerSelection.toLowerCase() === 'rock' && computerSelection === 'paper') || (playerSelection.toLowerCase() === 'scissors' && computerSelection === 'rock') || (playerSelection.toLowerCase() === 'paper' && computerSelection === 'scissors')){
                return('You lost!');
            }
            else{
                return('You won!');
            }
        }

        function game(){
            win_pc = 0;
            win_you = 0;
            for(let i = 0; i < 5; i++){
                result = playRound(getComputerChoice, getComputerChoice);
                console.log(result);
                if(result === 'You lost!'){
                    win_pc += 1;
                    if(win_pc === 3) break;
                }
                else if(result === 'You won!'){
                    win_you += 1;
                    if(win_you === 3) break;
                }
            }
            console.log(`PC wins: ${win_pc}`);
            console.log(`Your wins: ${win_you}`);
            if(win_pc > win_you){
                console.log('PC won the game!');
            }
            else if(win_pc === win_you){
                console.log('Draw!')
            }
            else{
                console.log('You won the game!');
            }
        }

        game();
    </script>
</body>
</html>